<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>
</head>
<body>

<h2>Admin Login</h2>
<input id="email" placeholder="Email"><br><br>
<input id="pass" type="password" placeholder="Password"><br><br>
<button onclick="login()">Login</button>

<hr>

<h3>Update Contact</h3>
<input id="p" placeholder="Phone">
<input id="e" placeholder="Email">
<button onclick="saveContact()">Save</button>

<h3>UPI + QR</h3>
<input id="upi" placeholder="UPI ID">
<input type="file" id="qrFile">
<button onclick="saveUPI()">Save</button>

<h3>Upload Gallery Image</h3>
<input type="file" id="gFile">
<button onclick="uploadImg()">Upload</button>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="firebase.js"></script>

<script>
function login(){
 auth.signInWithEmailAndPassword(email.value,pass.value)
 .then(()=>alert("Login success"))
 .catch(e=>alert(e.message));
}

function saveContact(){
 db.collection("site").doc("contact")
 .set({phone:p.value,email:e.value});
}

function saveUPI(){
 let f=qrFile.files[0];
 storage.ref("qr.png").put(f).then(s=>{
  s.ref.getDownloadURL().then(url=>{
   db.collection("site").doc("upi").set({upi:upi.value,qr:url});
  });
 });
}

function uploadImg(){
 let f=gFile.files[0];
 let r=storage.ref("gallery/"+Date.now()+f.name);
 r.put(f).then(s=>{
  s.ref.getDownloadURL().then(url=>{
   db.collection("gallery").add({url});
  });
 });
}
</script>

</body>
</html>
